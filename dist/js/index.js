(()=>{"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function(){function e(){t(this,e),i(this,"CollapsibleChecklist",function(){function e(a){t(this,e),i(this,"ChecklistItem",function(){function e(n,i){t(this,e),this.collapsibleChecklist=i,this.itemValue=n,this.checkboxID=this.itemValue.replace(/\s/g,""),this.checkboxHTML='\n                    <label for="'.concat(this.checkboxID,'" class="checkbox-box__checkbox-label">\n                        <input type="checkbox" id="').concat(this.checkboxID,'" class="checkbox checkbox-box__checkbox" name="gender" value="').concat(this.itemValue,'" checked="">\n                        <span class="checkbox-box__text">').concat(this.itemValue,"</span>\n                    </label>"),this.addCheckboxIfAbsent(),this.checkbox=document.getElementById(this.checkboxID),this.itemTagID="".concat(this.collapsibleChecklist.tagListID,"-").concat(this.checkboxID,"-tag"),this.tagHTML='\n                    <li id="'.concat(this.itemTagID,'" class="checkbox-box__tag"><a class="checkbox-box__tag-remove" title="Uncheck &quot;').concat(this.itemValue,"&quot; from ").concat(this.collapsibleChecklist.tagListName,'"><i class="fas fa-times"></i></a>').concat(this.itemValue,"</li>"),this.addCollapsedTag(),this.tag=document.getElementById(this.itemTagID),this.showTagIfChecked(),this.events()}return n(e,[{key:"events",value:function(){var t=this;this.checkbox.addEventListener("click",(function(){return t.showTagIfChecked()})),this.tag.querySelector("a").addEventListener("click",(function(){return t.uncheckItem()}))}},{key:"addCheckboxIfAbsent",value:function(){this.collapsibleChecklist.isInChecklist(this.itemValue)||this.collapsibleChecklist.checklist.insertAdjacentHTML("beforeend",this.checkboxHTML)}},{key:"addCollapsedTag",value:function(){this.collapsibleChecklist.tagList.insertAdjacentHTML("beforeend",this.tagHTML)}},{key:"showTagIfChecked",value:function(){this.checkbox.checked?(this.collapsibleChecklist.tagList.querySelector("span")&&this.collapsibleChecklist.tagList.removeChild(this.collapsibleChecklist.tagList.querySelector("span")),this.tag.hidden=!1):this.tag.hidden=!0}},{key:"uncheckItem",value:function(){this.tag.hidden=!0,this.checkbox.checked=!1,this.collapsibleChecklist.checkIfEmpty()}}]),e}()),this.checklistContainer=a,this.checklist=this.checklistContainer.querySelector(".checkbox-box__checklist"),this.checkboxes=this.checklistContainer.getElementsByClassName("checkbox-box__checkbox"),this.addItemTextInput=this.checklistContainer.querySelector(".checkbox-box__add-input"),this.addItemButton=this.checklistContainer.querySelector(".checkbox-box__add-btn"),this.tagList=this.checklistContainer.querySelector(".checkbox-box__tags"),this.tagListID=this.tagList.id,this.tagListName=this.tagList.parentElement.childNodes[0].nodeValue,this.addExistingChecklistItems(),this.checkIfEmpty(),this.events()}return n(e,[{key:"events",value:function(){var t=this;this.addItemTextInput.addEventListener("keyup",(function(e){"Enter"===e.code&&(t.addToChecklist(t.addItemTextInput.value),t.addItemTextInput.value="")})),this.addItemButton.addEventListener("click",(function(){t.addToChecklist(t.addItemTextInput.value),t.addItemTextInput.value=""}))}},{key:"mapValuesOfChecklist",value:function(){return Array.from(this.checkboxes).map(this.getChecklistItemValue)}},{key:"isInChecklist",value:function(t){return this.mapValuesOfChecklist().includes(t)}},{key:"getChecklistItemValue",value:function(t){return t.parentElement.querySelector(".checkbox-box__text").textContent.trim()}},{key:"getCheckboxOfValue",value:function(t){return this.checkboxes[this.mapValuesOfChecklist().indexOf(t)]}},{key:"addExistingChecklistItems",value:function(){var t=this;this.mapValuesOfChecklist().forEach((function(e){return new t.ChecklistItem(e,t)}))}},{key:"addToChecklist",value:function(t){""==t||null==t||this.isInChecklist(t)?this.isInChecklist(t)&&(this.getCheckboxOfValue(t).checked=!0):new this.ChecklistItem(t,this)}},{key:"checkIfEmpty",value:function(){Array.from(this.tagList.children).filter((function(t){return!t.hidden})).length||this.tagList.insertAdjacentHTML("afterbegin","<span>No tags added.</span>")}}]),e}()),this.checklistContainers=Array.from(document.getElementsByClassName("checkbox-box")),this.setCollapsibleChecklists()}return n(e,[{key:"setCollapsibleChecklists",value:function(){var t=this;this.checklistContainers.forEach((function(e){return new t.CollapsibleChecklist(e)}))}}]),e}();function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=document.getElementById("survey-form"),this.events()}var e,n;return e=t,(n=[{key:"events",value:function(){this.form.onkeydown=function(t){"Enter"===(t.code||t.key||0)&&t.preventDefault()},this.form.addEventListener("submit",(function(t){t.preventDefault()}))}}])&&s(e.prototype,n),t}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}var u=function(){function t(){var e,n,i;o(this,t),e=this,n="RadioToggle",i=function(){function t(e){o(this,t),this.toggle=e,this.toggleSides=this.toggle.querySelectorAll('[type="radio"]'),this.toggleTarget=this.toggle.parentElement.querySelector(".radio-toggle + *"),this.events()}return l(t,[{key:"events",value:function(){var t=this;this.toggleSides.forEach((function(e){e.addEventListener("change",(function(){return t.toggleElements()}))}))}},{key:"toggleElements",value:function(){this.toggleTarget.classList.toggle("hidden")}}]),t}(),n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,this.toggles=Array.from(document.getElementsByClassName("radio-toggle")),this.setRadioToggles()}return l(t,[{key:"setRadioToggles",value:function(){var t=this;this.toggles=this.toggles.map((function(e){return new t.RadioToggle(e)}))}}]),t}();function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.selector=e,this.events()}var e,n;return e=t,(n=[{key:"events",value:function(){var t=this;document.querySelector("body").addEventListener("click",(function(e){e.preventDefault,(e.target.matches(t.selector)||e.target.closest(t.selector))&&t.pulse(e.target)}))}},{key:"pulse",value:function(t){t.classList.remove("activated"),t.offsetWidth,t.classList.add("activated"),setTimeout((function(t){return t.classList.remove("activated")}),1e3*parseFloat(getComputedStyle(t).animationDuration,10),t)}}])&&h(e.prototype,n),t}();function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function k(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}var v=function(){function t(e){var n,i,a;f(this,t),n=this,i="Tag",a=function(){function t(e,n){f(this,t),this.tagSection=n,this.tagValue=e,this.tagID="".concat(this.tagSection.tagListID,"-").concat(this.tagValue.replace(/\s/g,""),"-tag"),this.tagHTML='<li id="'.concat(this.tagID,'" class="tag-box__tag"><a class="tag-box__tag-remove" title="Remove &quot;').concat(this.tagValue,"&quot; from ").concat(this.tagSection.tagListName,'">\n                <i class="fas fa-times"></i>\n                </a>').concat(this.tagValue,'<input type="text" class="tag-box__tag-form-save" name="').concat(this.tagSection.tagListName,'" value="').concat(this.tagValue,'"></li>'),this.addTag(),this.tag=document.getElementById(this.tagID),this.events()}return k(t,[{key:"events",value:function(){var t=this;this.tag.querySelector("a").addEventListener("click",(function(){return t.removeTag()}))}},{key:"addTag",value:function(){this.tagSection.tagList.insertAdjacentHTML("beforeend",this.tagHTML)}},{key:"removeTag",value:function(){this.tagSection.tagList.removeChild(this.tag)}}]),t}(),i in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n.Tag=a,this.tagSection=e,this.tagList=this.tagSection.querySelector(".tag-box__tags"),this.tagListID=this.tagList.id,this.tagListName=this.tagList.parentElement.childNodes[0].nodeValue,this.addTagInput=this.tagSection.querySelector(".tag-box__add-input"),this.addTagButton=this.tagSection.querySelector(".tag-box__add-btn"),this.tags=this.tagList.getElementsByClassName("tag-box__tag"),this.events()}return k(t,[{key:"events",value:function(){var t=this;this.addTagInput.addEventListener("keyup",(function(e){"Enter"===e.code&&(t.createTag(t.addTagInput.value),t.addTagInput.value="")})),this.addTagButton.addEventListener("click",(function(){t.createTag(t.addTagInput.value),t.addTagInput.value=""}))}},{key:"mapValuesOfTagList",value:function(){return Array.from(this.tags).map(this.getTagValue)}},{key:"isInTagList",value:function(t){return this.mapValuesOfTagList().includes(t)}},{key:"getTagValue",value:function(t){return t.querySelector(".tag-box__tag-form-save").value}},{key:"createTag",value:function(t){""==t||null==t||this.isInTagList(t)||new this.Tag(t,this)}}]),t}();function m(t,e,n,i,a,s,c){try{var o=t[s](c),r=o.value}catch(t){return void n(t)}o.done?e(r):Promise.resolve(r).then(i,a)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var s=t.apply(e,n);function c(t){m(s,i,a,c,o,"next",t)}function o(t){m(s,i,a,c,o,"throw",t)}c(void 0)}))}}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=function(){function t(){p(this,t),S(this,"TagSetSelect",function(){function t(e){p(this,t),S(this,"fillSetSelect",b(regeneratorRuntime.mark((function t(){var e,n,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("../pronouns.tab");case 2:return e=t.sent,t.next=5,e.text();case 5:return n=t.sent,t.next=8,n.replaceAll("\t"," / ").split("\n");case 8:t.sent.forEach((function(t){i.tagSetSelect.options[i.tagSetSelect.options.length]=new Option(t,t)}));case 10:case"end":return t.stop()}}),t)})))),this.tagSetSelectContainer=e,this.tagSetSelect=this.tagSetSelectContainer.querySelector(".add-from-set__select"),this.tagSetAddButton=this.tagSetSelectContainer.querySelector(".add-from-set__add-btn"),this.tagSections=Array.from(document.querySelectorAll(".add-from-set + * > .tag-box")),this.fillSetSelect(),this.setTagSections(),this.events()}return x(t,[{key:"events",value:function(){var t=this;this.tagSetAddButton.addEventListener("click",(function(){t.parseTagsFromSelect()}))}},{key:"setTagSections",value:function(){this.tagSections=this.tagSections.map((function(t){return new v(t)}))}},{key:"parseTagsFromSelect",value:function(){var t=this.tagSetSelect.options[this.tagSetSelect.selectedIndex].text.split(" / ");this.addTagSetToTagSections(t)}},{key:"addTagSetToTagSections",value:function(t){var e=this;t.forEach((function(t,n){e.tagSections[n].createTag(t)}))}}]),t}()),this.tagSetSelectContainers=Array.from(document.getElementsByClassName("add-from-set")),this.setTagSetSelects()}return x(t,[{key:"setTagSetSelects",value:function(){var t=this;this.tagSetSelectContainers.forEach((function(e){return new t.TagSetSelect(e)}))}}]),t}();new c,new u,new v(document.querySelector(".genderFields > .tag-box")),new g(".checkbox"),new g(".btn--add"),new a,new T})();